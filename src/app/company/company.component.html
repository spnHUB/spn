<h2>Listings</h2>

<div class="mat-elevation-z8">
  <div>
    <a mat-raised-button color="primary" (click)="Openpopup('')" style="margin: 2%">Add New</a>
    <div class="search-container">
      <mat-form-field appearance="fill">
        <mat-label>Search</mat-label>
        <input matInput [(ngModel)]="searchQuery" (ngModelChange)="applyFilter($event)"
          placeholder="Search by name or email" />
      </mat-form-field>
    </div>
  </div>
  <table mat-table [dataSource]="finaldata" matSort class="mat-elevation-z8">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> ID</th>
      <td mat-cell *matCellDef="let element">{{element.id}}</td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name</th>
      <td mat-cell *matCellDef="let element">{{element.name}}</td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> E-mail</th>
      <td mat-cell *matCellDef="let element">{{element.email}}</td>
    </ng-container>

    <ng-container matColumnDef="Role">
      <th mat-header-cell *matHeaderCellDef> Role</th>
      <!-- <td mat-cell *matCellDef="let element">{{element.role}}</td> -->
      <td mat-cell *matCellDef="let element">
        <mat-select [(value)]="element.role" (selectionChange)="onRoleChange(element)">
          <mat-option value="web designer">web designer</mat-option>
          <mat-option value="backend developer">backend developer</mat-option>
          <mat-option value="Team lead">Team Lead</mat-option>
          <mat-option value="frontend developer">frontend developer</mat-option>
          <mat-option value="android developer">android developer</mat-option>
          <mat-option value="project manager">project manager</mat-option>
          <mat-option value="associate">associate</mat-option>
          <mat-option value="software tester">Software Tester</mat-option>
        </mat-select>
      </td>

    </ng-container>

    <ng-container matColumnDef="isactive">
      <th mat-header-cell *matHeaderCellDef> Is Active</th>
      <td mat-cell *matCellDef="let element">{{element.isactive}}</td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef> Action</th>
      <td mat-cell *matCellDef="let element">
        <div>
          <a mat-raised-button (click)="EditCompany(element.id)" color="primary">Edit</a> |
          <a mat-raised-button (click)="RemoveCompany(element.id)" color="accent">Delete</a>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayColums"></tr>
    <tr mat-row *matRowDef="let row; columns: displayColums;"></tr>

  </table>
  <mat-paginator [pageSizeOptions]="[10, 20, 30]" showFirstLastButtons aria-label="Select page of periodic elements">
  </mat-paginator>
</div>